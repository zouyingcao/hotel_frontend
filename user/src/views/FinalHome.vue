<template>
    <div class="é¡µé¢">
        <div class="å¤´éƒ¨">
            <Navbar ref="nav_ins"></Navbar>
        </div>
        <div style="background-color: #003580;" class="é¡¶éƒ¨å¤§å—">
          <div class="ä¸€çº§æ ‡é¢˜">
              <span>æ²³é©¬é…’åº—ï¼Œç«­å¿ƒä¼´ä½ ï¼Œèˆ’é€‚æ—…è¡Œ</span>
          </div>
          <div class="äºŒçº§æ ‡é¢˜">
              <span>ä¸ºä½ çš„æ—…è¡Œè·å–ç¤¼é‡ - ä½¿ç”¨å…è´¹çš„hemahotel.xyzå¸å·ï¼Œå³åˆ»è§£é”è‡³å°‘10%çš„ä¼˜æƒ </span>
          </div>
          <div class="æŒ‰é’®æ‰€åœ¨è¡Œ">
            <el-button class="æŒ‰é’®" type="primary" @click="gotologin">ç«‹åˆ»ç™»å½•/æ³¨å†Œ</el-button>
          </div>
        </div>
        <div class="é¡µé¢æ­£æ–‡">
          <el-backtop style="height:70px;width:70px;font-size:30px;box-shadow:0 0 6px rgba(0,0,0,0.5);"></el-backtop>
          <div>
            <div class="å­æ ‡é¢˜">çƒ­é—¨åŸå¸‚æˆ–åœ°åŒº: ä¼˜æƒ è®¢è´­</div>
              <el-carousel :interval="4000" type="card" height="250px" style="/* margin-left:-130px */">
              <el-carousel-item v-for="(item,index) in cata2" :key="index">
                <div class="å›¾ç‰‡æ¡†" style="text-align:center" @click="tolists(item.name)">
                  <div style="font-size:30px; font-weight: bold; color: red">ğŸ”¥{{item.name}}</div>
                  <el-image 
                  style="width:500px; height:200px"
                  :src="require('../img/åŸå¸‚/'+item.name+'.jpg')" fit="cover"></el-image>
                </div>
              </el-carousel-item>
            </el-carousel>

          </div>
          <div class="ä½å®¿ç±»å‹æ ç›®">
            <div class="å­æ ‡é¢˜">å¤šç§ä½å®¿ç±»å‹: ä»»ä½ æŒ‘é€‰</div>
            <div class="ä½å®¿ç±»å‹">
              <el-card shadow="hover" class="ç§ç±»æ ¼" v-for="(item,index) in cata1" :key="index">
                <div class="å›¾ç‰‡æ¡†" style="text-align:center">
                  <el-image 
                  style="width:225px; height:225px"
                  :src="require('../img/'+item.name+'.jpg')" fit="cover" @click="tolists(item.name)"></el-image>
                </div>
                <div style="font-size:20px;margin-top:10px;font-weight: bold;">
                  {{item.name}}
                </div>
                <div style="color: #909090;">
                  å…±æœ‰{{item.num}}å®¶{{item.name}}
                </div>
              </el-card>
            </div>
          </div>
          
          <div class="å•†å“æ¨è">
            <div class="å­æ ‡é¢˜">å®¢äººå–œçˆ±çš„æ—…è¡Œä½å¤„</div>
              <div class="æ¨èå•†å“">
                <el-card shadow="hover" class="å•†å“æ ¼" v-for="(value,index) in é…’åº—åˆ—è¡¨" :key="index">
                    <!-- <el-skeleton :loading="recommend_loading" animated>
                      <template slot="template">
                        <div class="å•†å“å›¾ç‰‡æ ¼">
                          <el-skeleton-item variant="image" style="width: 250px; height: 250px;"/>
                        </div>
                        <el-skeleton :rows="4" animated />
                      </template>
                    </el-skeleton> -->
                    <div class="å•†å“å›¾ç‰‡æ ¼">
                      <el-image :src="value.picture" style="width:280px; height:250px" fit="cover" @click="toshop(value.id)"></el-image>
                    </div>
                    <div class="é”€é‡å’Œä»·æ ¼">
                        <div class="å•†å“ä»·æ ¼">Â¥{{value.price.toFixed(2)}}</div>
                    </div>
                    <div class="å•†å“æ ‡é¢˜">
                        {{value.name}}
                    </div>
                    <div class="æŒ‰é’®æ ">
                        <el-button type="warning" @click="addToCart(value.id)">æ”¶è—é…’åº—</el-button>
                        <el-button type="primary" @click="toshop(value.id)">ç«‹åˆ»é¢„å®š</el-button>
                    </div>
                  </el-card>     
              </div>
            </div>
          <div class="åŸå¸‚é€‰æ‹©">
            <div class="å­æ ‡é¢˜">æ›´å¤šç›®çš„åœ°é€‰æ‹©</div>
            <div style="width:1080px; margin: 0 auto">
              <el-tabs type="border-card">
                <el-tab-pane label="çœä»½ä¸ç›´è¾–å¸‚">
                  <div shadow="hover" class="tabæ ¼" style="padding:0"
                  v-for="(value,index) in cata4" 
                  :key="index">
                      <div style="font-weight: bold">{{value.name}}</div>
                      <div style="color: gray">å…±{{value.num}}å¤„ä½å®¿</div>
                  </div>
                </el-tab-pane>
                <el-tab-pane label="åŒºåŸŸ">
                  <div shadow="hover" class="tabæ ¼" style="padding:0"
                  v-for="(value,index) in cata5" 
                  :key="index">
                      <div style="font-weight: bold">{{value.name}}</div>
                      <div style="color: gray">å…±{{value.num}}å¤„ä½å®¿</div>
                  </div>
                </el-tab-pane>
                <el-tab-pane label="å‘¨è¾¹åœ°æ ‡/æ™¯ç‚¹">
                  <div shadow="hover" class="tabæ ¼" style="padding:0"
                  v-for="(value,index) in cata6" 
                  :key="index">
                      <div style="font-weight: bold">{{value.name}}</div>
                      <div style="color: gray">å…±{{value.num}}å¤„ä½å®¿</div>
                  </div>
                </el-tab-pane>
              </el-tabs>
            </div>
          </div>
        </div>
        <div class="åº•éƒ¨å¤§å—">
          <video autoplay="autoplay" loop style="width: 1200px; margin: auto; border-radius: 15px" @click="tolists('é…’åº—')">
            <source src="../video/bottom.mp4" type="video/mp4" />
          </video>
        </div>
    </div>
</template>

<style scoped>

.tabæ ¼{
  float: left;
  margin-top: 10px;
  margin-left: 20px;
  margin-bottom: 10px;
  width: 185px;
  /* background-color: rgba(147, 156, 164, 0.05); */
}

.å•†å“æ ¼{
  margin: 3px;
  width: 350px;
  background-color: rgba(147, 156, 164, 0.1);
}
.æ¨èå•†å“{
  /* height: 700px; */
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
}

.ä½å®¿ç±»å‹{
  /* height: 700px; */
  /* width: 1200px; */
  display: flex;
  flex: auto;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
}
.ç§ç±»æ ¼{
  margin: 3px;
  width: 270px;
}
.é¡µé¢æ­£æ–‡{
  margin: 0 auto;
  max-width: 1170px;
}
.å­æ ‡é¢˜ {
  margin-top: 20px;
  margin-left: -50px;
  margin-bottom: 20px;
  font-weight: bold;
  font-size: 30px;
}

.é¡¶éƒ¨å¤§å—{
  height: 350px;
  text-align: left;
  /* font-weight: 700; */
  /* line-height: 62px; */
}

.åº•éƒ¨å¤§å—{
  margin-top:50px;
  background-color:#003580;
  text-align:center;
  height:400px;
  display: flex;
  align-items: center;
  /* font-weight: 700; */
  /* line-height: 62px; */
}

.ä¸€çº§æ ‡é¢˜{
  color: #ffffff;
  font-weight: bold;
  font-size: 50px;
  padding-top: 50px;
  margin: auto 10%;
}

.äºŒçº§æ ‡é¢˜{
  color: #ffffff;
  font-size: 25px;
  margin: auto 10%;
}

.æŒ‰é’®æ‰€åœ¨è¡Œ{
  margin-top: 100px;
  margin-left: 10%;
}

.å•†å“ä»·æ ¼{
    float: left;
    width: 30%;
    margin-top: 15px;
    line-height: 30px;
    font-size: 20px;
    color: red;
    text-indent: 10px;
    text-align: left;
    height: 30px;
}
.å•†å“é”€é‡{
    width: 30%;
    float: right;
    line-height: 30px;
    margin-top: 15px;
    font-size: 15px;
    color: #5f6062;
    text-align: left;
    height: 30px;
}
.å•†å“æ ‡é¢˜{
    width: 100%;
    height: 30px;
    overflow-y: scroll;
    display: block;
    padding: 10px;
    margin-bottom: 15px;
    font-size: 15px;
    text-align: left;
}
.å•†å“å›¾ç‰‡æ ¼{
    display :flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    height: 250px;
    border: 2px solid #f5f5f5;
}
.è®¡æ•°å™¨{
    height: 45px;
    text-align: center;
}

.æŒ‰é’®æ {
    text-align: center;
}


</style>

<script>
const axios = require('axios');
/* import App from '../App.vue' */
import Navbar from './Navbar.vue'
import Header from './Header.vue'
// import Bottom from './Bottom.vue'
export default {
  components: {
    Navbar,
    Header,
    // Bottom
  },
  created () {
    this.recommend_loading=true;
    axios.post('hotel/recommend', 
      {'num': 6}).then(res => {
        console.log(res.data.data.hotels);
        this.é…’åº—åˆ—è¡¨=res.data.data.hotels;
        console.log(this.é…’åº—åˆ—è¡¨)
    })
    this.recommend_loading=false;
  },
  data () {
    return {
      recommend_loading: true,
      é…’åº—åˆ—è¡¨:[

      ],
      cata1:[
        {name:"é…’åº—", num:1223},
        {name:"å…¬å¯“", num:987},
        {name:"é£æƒ…æœ¨å±‹", num:67},
        {name:"åº¦å‡æ‘", num:8752},
        {name:"åˆ«å¢…", num:1062},
        {name:"å…¬å¯“å¼é…’åº—", num:7647},
        {name:"æ—¥å¼æ—…é¦†", num:78},
        {name:"è±ªåå¸ç¯·", num:123},
      ],
      cata2:[
        {name:'è‹å·'},
        {name:'ä¸Šæµ·'},
        {name:'å—äº¬'},
        {name:'å¹¿ä¸œ'},
        {name:'åŒ—äº¬'}
      ],
      cata5:[
        {name:'åä¸œåœ°åŒº',num:86582542},
        {name:'ä¸œåŒ—åœ°åŒº',num:114523},
        {name:'åä¸­åœ°åŒº',num:12134509},
        {name:'ååŒ—åœ°åŒº',num:102120},
        {name:'åå—åœ°åŒº',num:962030},
        {name:'è¥¿å—åœ°åŒº',num:86500},
        {name:'ä¸œåŒ—åœ°åŒº',num:752352},
        {name:'è¥¿åŒ—åœ°åŒº',num:202},
      ],
      cata4:[
        {name:'æ²³åŒ—çœ',num:256073},
        {name:'å±±è¥¿çœ',num:916245},
        {name:'è¾½å®çœ',num:290006},
        {name:'å‰æ—çœ',num:38829},
        {name:'é»‘é¾™æ±Ÿçœ',num:742925},
        {name:'æ±Ÿè‹çœ',num:770620},
        {name:'æµ™æ±Ÿçœ',num:477640},
        {name:'å®‰å¾½çœ',num:108411},
        {name:'ç¦å»ºçœ',num:6188},
        {name:'æ±Ÿè¥¿çœ',num:581094},
        {name:'å±±ä¸œçœ',num:826977},
        {name:'æ²³å—çœ',num:343757},
        {name:'æ¹–åŒ—çœ',num:640725},
        {name:'æ¹–å—çœ',num:17593},
        {name:'å¹¿ä¸œçœ',num:490575},
        {name:'æµ·å—çœ',num:979135},
        {name:'å››å·çœ',num:763320},
        {name:'è´µå·çœ',num:450692},
        {name:'äº‘å—çœ',num:779214},
        {name:'é™•è¥¿çœ',num:150990},
        {name:'ç”˜è‚ƒçœ',num:307669},
        {name:'é’æµ·çœ',num:4104},
        {name:'å°æ¹¾çœ',num:834596},
      ],
      cata6:[
        {name:'å››é¢ä½›',num:20},
        {name:'æ–°å…³ä»”è§’',num:47},
        {name:'å—äº¬é‡‘é¹°è´­ç‰©ä¸­å¿ƒ',num:72},
        {name:'æµ…æ°´æ¹¾',num:96},
        {name:'å…¬ä¸»æ¸¯',num:73},
        {name:'é€¢ç”²å¤œå¸‚',num:61},
        {name:'ç¬¬ä¸€ä¸–ç•Œå¹¿åœº',num:44},
        {name:'è‹å·ä¹é«˜ä¹å›­',num:9},
        {name:'åŒ—æŠ•æ¸©æ³‰',num:75},
        {name:'é¦™æ¸¯è¿ªå£«å°¼ä¹å›­',num:73},
        {name:'ä¸Šä¸‹ä¹æ­¥è¡Œè¡—',num:4},
        {name:'åŒå¨æ°´ä¸Šä¹å›­',num:50},
        {name:'ä¸Šæµ·è¿ªå£«å°¼ä¹å›­',num:11},
        {name:'å¥¥å…°å¤šè¿ªå£«å°¼ä¹å›­',num:69},
        {name:'å°ä¸­ç«è½¦ç«™',num:56},
      ]
    }
  },
  function: {},
  methods: {
    gotologin(){
      this.$router.push('/login')
    },
    tolists(name){
      console.log('fuck');
      this.$router.push({ path: '/goodslist', query: { productname: name} })
      location.reload();
    },
    toshop (id) {
        this.$router.push({ path: '/hoteldetail', query: { id: id } })
    },
    addToCart(productid){
      this.$refs.nav_ins.cart_local2vue();
      var finditem=0;
      for (var i=0;i<this.$refs.nav_ins.æ”¶è—åˆ—è¡¨.length;i++){//æ”¶è—çš„ç¬¬å‡ è¡Œ
          if (this.$refs.nav_ins.æ”¶è—åˆ—è¡¨[i].id===productid){
              finditem=1;
              break;
          }
      }
      if (!finditem){
          this.$notify({
              title: 'æ·»åŠ æˆåŠŸ',
              message: 'å·²å°†é…’åº—æ·»åŠ è‡³æ”¶è—å¤¹',
              type: 'success',
              position: 'top-left',
              offset: 60
          })
          for (var i=0;i<this.é…’åº—åˆ—è¡¨.length;i++){
              if (this.é…’åº—åˆ—è¡¨[i].id===productid){
                  var pushitem={
                      "id": this.é…’åº—åˆ—è¡¨[i].id,
                      "picture": this.é…’åº—åˆ—è¡¨[i].picture,
                      "name" :this.é…’åº—åˆ—è¡¨[i].name,
                      "star": this.é…’åº—åˆ—è¡¨[i].star,
                  }
                  this.$refs.nav_ins.æ”¶è—åˆ—è¡¨.push(pushitem);
                  break;
              }
          }
      }
      else {
          this.$notify({
              title: 'æç¤º',
              message: 'æ­¤é…’åº—å·²åœ¨æ‚¨çš„æ”¶è—å¤¹ä¸­ï¼Œè¯·å‹¿é‡å¤æ·»åŠ ',
              type: 'warning',
              position: 'top-left',
              offset: 60
          })
      }
      localStorage.tempcart=JSON.stringify(this.$refs.nav_ins.æ”¶è—åˆ—è¡¨);//æ›´æ–°æœ¬æ¬¡ç¼“å­˜
      this.$refs.nav_ins.cart_vue2local();//æ“ä½œå®Œæˆï¼Œvueæ•°æ®å­˜åœ¨localä¸­
      this.$refs.nav_ins.cart_local2vue();//å†æ¬¡åŒæ­¥
    },
  }
}
</script>
